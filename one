pipeline:
  name: sample-pipeline
  identifier: samplePipeline
  projectIdentifier: myProject
  orgIdentifier: myOrg

  stages:
    - stage:
        name: Build Stage
        identifier: buildStage
        type: CI
        spec:
          execution:
            steps:
              - step:
                  name: Build
                  identifier: build
                  type: Run
                  spec:
                    shell: Bash
                    command: |
                      echo "Building application"

    - stage:
        name: Deploy Stage
        identifier: deployStage
        type: Deployment
        spec:
          service:
            serviceRef: myService
          environment:
            environmentRef: dev
            infrastructureDefinitions:
              - identifier: devInfra
          execution:
            steps:
              - step:
                  name: Deploy to K8s
                  identifier: deployToK8s
                  type: K8sApply
                  spec:
                    filePaths:
                      - manifests/deployment.yaml
